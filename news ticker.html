<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta property="og:site_name" content="Choice">
    <meta property="og:url" content="">
    <meta property="og:locale" content="zh_TW">
    <meta property="og:type" content="article">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <title>跑馬燈</title>
    <!-- <style>
        img:is([sizes="auto" i], [sizes^="auto," i]) {
            contain-intrinsic-size: 3000px 1500px
        }
    </style> -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com/">
    <style id="classic-theme-styles-inline-css" type="text/css">
        /*! This file is auto-generated */
        .wp-block-button__link {
            color: #fff;
            background-color: #32373c;
            border-radius: 9999px;
            box-shadow: none;
            text-decoration: none;
            padding: calc(.667em + 2px) calc(1.333em + 2px);
            font-size: 1.125em
        }

        .wp-block-file__button {
            background: #32373c;
            color: #fff;
            text-decoration: none
        }
    </style>
    <style id="global-styles-inline-css" type="text/css">
        :root {
            --wp--preset--aspect-ratio--square: 1;
            --wp--preset--aspect-ratio--4-3: 4/3;
            --wp--preset--aspect-ratio--3-4: 3/4;
            --wp--preset--aspect-ratio--3-2: 3/2;
            --wp--preset--aspect-ratio--2-3: 2/3;
            --wp--preset--aspect-ratio--16-9: 16/9;
            --wp--preset--aspect-ratio--9-16: 9/16;
            --wp--preset--color--black: #000000;
            --wp--preset--color--cyan-bluish-gray: #abb8c3;
            --wp--preset--color--white: #ffffff;
            --wp--preset--color--pale-pink: #f78da7;
            --wp--preset--color--vivid-red: #cf2e2e;
            --wp--preset--color--luminous-vivid-orange: #ff6900;
            --wp--preset--color--luminous-vivid-amber: #fcb900;
            --wp--preset--color--light-green-cyan: #7bdcb5;
            --wp--preset--color--vivid-green-cyan: #00d084;
            --wp--preset--color--pale-cyan-blue: #8ed1fc;
            --wp--preset--color--vivid-cyan-blue: #0693e3;
            --wp--preset--color--vivid-purple: #9b51e0;
            --wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg, rgba(6, 147, 227, 1) 0%, rgb(155, 81, 224) 100%);
            --wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg, rgb(122, 220, 180) 0%, rgb(0, 208, 130) 100%);
            --wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg, rgba(252, 185, 0, 1) 0%, rgba(255, 105, 0, 1) 100%);
            --wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg, rgba(255, 105, 0, 1) 0%, rgb(207, 46, 46) 100%);
            --wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg, rgb(238, 238, 238) 0%, rgb(169, 184, 195) 100%);
            --wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg, rgb(74, 234, 220) 0%, rgb(151, 120, 209) 20%, rgb(207, 42, 186) 40%, rgb(238, 44, 130) 60%, rgb(251, 105, 98) 80%, rgb(254, 248, 76) 100%);
            --wp--preset--gradient--blush-light-purple: linear-gradient(135deg, rgb(255, 206, 236) 0%, rgb(152, 150, 240) 100%);
            --wp--preset--gradient--blush-bordeaux: linear-gradient(135deg, rgb(254, 205, 165) 0%, rgb(254, 45, 45) 50%, rgb(107, 0, 62) 100%);
            --wp--preset--gradient--luminous-dusk: linear-gradient(135deg, rgb(255, 203, 112) 0%, rgb(199, 81, 192) 50%, rgb(65, 88, 208) 100%);
            --wp--preset--gradient--pale-ocean: linear-gradient(135deg, rgb(255, 245, 203) 0%, rgb(182, 227, 212) 50%, rgb(51, 167, 181) 100%);
            --wp--preset--gradient--electric-grass: linear-gradient(135deg, rgb(202, 248, 128) 0%, rgb(113, 206, 126) 100%);
            --wp--preset--gradient--midnight: linear-gradient(135deg, rgb(2, 3, 129) 0%, rgb(40, 116, 252) 100%);
            --wp--preset--font-size--small: 13px;
            --wp--preset--font-size--medium: 20px;
            --wp--preset--font-size--large: 36px;
            --wp--preset--font-size--x-large: 42px;
            --wp--preset--spacing--20: 0.44rem;
            --wp--preset--spacing--30: 0.67rem;
            --wp--preset--spacing--40: 1rem;
            --wp--preset--spacing--50: 1.5rem;
            --wp--preset--spacing--60: 2.25rem;
            --wp--preset--spacing--70: 3.38rem;
            --wp--preset--spacing--80: 5.06rem;
            --wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);
            --wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);
            --wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);
            --wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);
            --wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);
        }

        :where(.is-layout-flex) {
            gap: 0.5em;
        }

        :where(.is-layout-grid) {
            gap: 0.5em;
        }

        body .is-layout-flex {
            display: flex;
        }

        .is-layout-flex {
            flex-wrap: wrap;
            align-items: center;
        }

        .is-layout-flex> :is(*, div) {
            margin: 0;
        }

        body .is-layout-grid {
            display: grid;
        }

        .is-layout-grid> :is(*, div) {
            margin: 0;
        }

        :where(.wp-block-columns.is-layout-flex) {
            gap: 2em;
        }

        :where(.wp-block-columns.is-layout-grid) {
            gap: 2em;
        }

        :where(.wp-block-post-template.is-layout-flex) {
            gap: 1.25em;
        }

        :where(.wp-block-post-template.is-layout-grid) {
            gap: 1.25em;
        }

        .has-black-color {
            color: var(--wp--preset--color--black) !important;
        }

        .has-cyan-bluish-gray-color {
            color: var(--wp--preset--color--cyan-bluish-gray) !important;
        }

        .has-white-color {
            color: var(--wp--preset--color--white) !important;
        }

        .has-pale-pink-color {
            color: var(--wp--preset--color--pale-pink) !important;
        }

        .has-vivid-red-color {
            color: var(--wp--preset--color--vivid-red) !important;
        }

        .has-luminous-vivid-orange-color {
            color: var(--wp--preset--color--luminous-vivid-orange) !important;
        }

        .has-luminous-vivid-amber-color {
            color: var(--wp--preset--color--luminous-vivid-amber) !important;
        }

        .has-light-green-cyan-color {
            color: var(--wp--preset--color--light-green-cyan) !important;
        }

        .has-vivid-green-cyan-color {
            color: var(--wp--preset--color--vivid-green-cyan) !important;
        }

        .has-pale-cyan-blue-color {
            color: var(--wp--preset--color--pale-cyan-blue) !important;
        }

        .has-vivid-cyan-blue-color {
            color: var(--wp--preset--color--vivid-cyan-blue) !important;
        }

        .has-vivid-purple-color {
            color: var(--wp--preset--color--vivid-purple) !important;
        }

        .has-black-background-color {
            background-color: var(--wp--preset--color--black) !important;
        }

        .has-cyan-bluish-gray-background-color {
            background-color: var(--wp--preset--color--cyan-bluish-gray) !important;
        }

        .has-white-background-color {
            background-color: var(--wp--preset--color--white) !important;
        }

        .has-pale-pink-background-color {
            background-color: var(--wp--preset--color--pale-pink) !important;
        }

        .has-vivid-red-background-color {
            background-color: var(--wp--preset--color--vivid-red) !important;
        }

        .has-luminous-vivid-orange-background-color {
            background-color: var(--wp--preset--color--luminous-vivid-orange) !important;
        }

        .has-luminous-vivid-amber-background-color {
            background-color: var(--wp--preset--color--luminous-vivid-amber) !important;
        }

        .has-light-green-cyan-background-color {
            background-color: var(--wp--preset--color--light-green-cyan) !important;
        }

        .has-vivid-green-cyan-background-color {
            background-color: var(--wp--preset--color--vivid-green-cyan) !important;
        }

        .has-pale-cyan-blue-background-color {
            background-color: var(--wp--preset--color--pale-cyan-blue) !important;
        }

        .has-vivid-cyan-blue-background-color {
            background-color: var(--wp--preset--color--vivid-cyan-blue) !important;
        }

        .has-vivid-purple-background-color {
            background-color: var(--wp--preset--color--vivid-purple) !important;
        }

        .has-black-border-color {
            border-color: var(--wp--preset--color--black) !important;
        }

        .has-cyan-bluish-gray-border-color {
            border-color: var(--wp--preset--color--cyan-bluish-gray) !important;
        }

        .has-white-border-color {
            border-color: var(--wp--preset--color--white) !important;
        }

        .has-pale-pink-border-color {
            border-color: var(--wp--preset--color--pale-pink) !important;
        }

        .has-vivid-red-border-color {
            border-color: var(--wp--preset--color--vivid-red) !important;
        }

        .has-luminous-vivid-orange-border-color {
            border-color: var(--wp--preset--color--luminous-vivid-orange) !important;
        }

        .has-luminous-vivid-amber-border-color {
            border-color: var(--wp--preset--color--luminous-vivid-amber) !important;
        }

        .has-light-green-cyan-border-color {
            border-color: var(--wp--preset--color--light-green-cyan) !important;
        }

        .has-vivid-green-cyan-border-color {
            border-color: var(--wp--preset--color--vivid-green-cyan) !important;
        }

        .has-pale-cyan-blue-border-color {
            border-color: var(--wp--preset--color--pale-cyan-blue) !important;
        }

        .has-vivid-cyan-blue-border-color {
            border-color: var(--wp--preset--color--vivid-cyan-blue) !important;
        }

        .has-vivid-purple-border-color {
            border-color: var(--wp--preset--color--vivid-purple) !important;
        }

        .has-vivid-cyan-blue-to-vivid-purple-gradient-background {
            background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;
        }

        .has-light-green-cyan-to-vivid-green-cyan-gradient-background {
            background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;
        }

        .has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background {
            background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;
        }

        .has-luminous-vivid-orange-to-vivid-red-gradient-background {
            background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;
        }

        .has-very-light-gray-to-cyan-bluish-gray-gradient-background {
            background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;
        }

        .has-cool-to-warm-spectrum-gradient-background {
            background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;
        }

        .has-blush-light-purple-gradient-background {
            background: var(--wp--preset--gradient--blush-light-purple) !important;
        }

        .has-blush-bordeaux-gradient-background {
            background: var(--wp--preset--gradient--blush-bordeaux) !important;
        }

        .has-luminous-dusk-gradient-background {
            background: var(--wp--preset--gradient--luminous-dusk) !important;
        }

        .has-pale-ocean-gradient-background {
            background: var(--wp--preset--gradient--pale-ocean) !important;
        }

        .has-electric-grass-gradient-background {
            background: var(--wp--preset--gradient--electric-grass) !important;
        }

        .has-midnight-gradient-background {
            background: var(--wp--preset--gradient--midnight) !important;
        }

        .has-small-font-size {
            font-size: var(--wp--preset--font-size--small) !important;
        }

        .has-medium-font-size {
            font-size: var(--wp--preset--font-size--medium) !important;
        }

        .has-large-font-size {
            font-size: var(--wp--preset--font-size--large) !important;
        }

        .has-x-large-font-size {
            font-size: var(--wp--preset--font-size--x-large) !important;
        }

        :where(.wp-block-post-template.is-layout-flex) {
            gap: 1.25em;
        }

        :where(.wp-block-post-template.is-layout-grid) {
            gap: 1.25em;
        }

        :where(.wp-block-columns.is-layout-flex) {
            gap: 2em;
        }

        :where(.wp-block-columns.is-layout-grid) {
            gap: 2em;
        }

        :root :where(.wp-block-pullquote) {
            font-size: 1.5em;
            line-height: 1.6;
        }
    </style>
    <style type="text/css" id="wp-custom-css">
        .grecaptcha-badge {
            opacity: 0
        }
    </style>
</head>

<body class="" ontouchstart="">
    <div id="page" class="site-wrapper site">
        <div id="content" class="site-content">
            <style>
                .fs-tool-container {
                    max-width: 900px;
                    margin: 40px auto;
                    padding: 20px;
                    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
                    text-align: center;
                    box-sizing: border-box;
                }

                .fs-main-title {
                    font-size: 1.8em;
                    margin-bottom: 20px;
                    color: #333;
                    font-weight: 800;
                    line-height: 1.2;
                    text-align: center;
                }

                .fs-controls {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 20px;
                    justify-content: center;
                    align-items: center;
                    background: #f7f7f7;
                    padding: 25px;
                    border-radius: 12px;
                    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
                }

                .fs-group {
                    display: flex;
                    flex-direction: column;
                    align-items: flex-start;
                }

                .fs-color-row {
                    display: flex;
                    gap: 20px;
                    align-items: center;
                }

                .fs-group label {
                    font-size: 14px;
                    margin-bottom: 8px;
                    font-weight: bold;
                    color: #444;
                }

                .fs-input-text {
                    padding: 10px;
                    font-size: 16px;
                    border: 1px solid #ccc;
                    border-radius: 6px;
                    width: 220px;
                    max-width: 100%;
                }

                .fs-input-color {
                    height: 42px;
                    width: 60px;
                    padding: 0;
                    border: 2px solid #ddd;
                    border-radius: 4px;
                    cursor: pointer;
                    background: none;
                }

                .fs-radio-group {
                    display: flex;
                    gap: 15px;
                    background: #fff;
                    padding: 10px;
                    border-radius: 6px;
                    border: 1px solid #ddd;
                    height: 42px;
                    box-sizing: border-box;
                    align-items: center;
                }

                .fs-radio-group label {
                    margin: 0;
                    font-weight: normal;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 5px;
                }

                .fs-btn {
                    background-color: #0073aa;
                    color: white;
                    border: none;
                    padding: 0 25px;
                    font-size: 16px;
                    border-radius: 6px;
                    cursor: pointer;
                    transition: background 0.3s, transform 0.1s;
                    height: 42px;
                    font-weight: bold;
                    margin-top: 24px;
                }

                .fs-btn:hover {
                    background-color: #005177;
                }

                .fs-btn:active {
                    transform: scale(0.98);
                }

                .heavy-font {
                    font-family: "PingFang TC", "Heiti TC", "Microsoft JhengHei", "Noto Sans TC", sans-serif;
                    font-weight: 900;
                    letter-spacing: 2px;
                }

                .english-mode-style {
                    font-family: "Arial Black", "Impact", "Roboto Black", sans-serif !important;
                    font-weight: 900;
                    letter-spacing: 0px !important;
                }

                .fs-preview-area {
                    margin-top: 30px;
                    border: 2px dashed #ccc;
                    padding: 20px;
                    min-height: 200px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    overflow: hidden;
                    border-radius: 8px;
                    background-color: #fff;
                    overflow-wrap: break-word;
                    word-break: break-all;
                }

                .fs-preview-text {
                    font-size: 2.5em;
                    line-height: 1.1;
                    text-align: center;
                    white-space: pre-wrap;
                }

                #fs-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100vw;
                    height: 100vh;
                    z-index: 99999;
                    display: none;
                    background-color: #fff;
                    cursor: pointer;
                    padding: 15px 10px;
                    box-sizing: border-box;
                    overflow: hidden;
                }

                #fs-overlay-text {
                    line-height: 1.1;
                    box-sizing: border-box;
                    margin: 0;
                    padding: 0;
                    display: flex;
                    flex-wrap: nowrap;
                    white-space: nowrap;
                    width: 100%;
                    height: 100%;
                    justify-content: center;
                    align-items: center;
                }

                .marquee-item {
                    display: inline-block;
                    flex-shrink: 0;
                    white-space: nowrap;
                }

                .mode-horizontal {}

                .mode-grid {
                    display: flex !important;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    white-space: normal !important;
                    text-align: center;
                    line-height: 1.0 !important;
                }

                .mode-random {
                    display: block !important;
                    position: relative;
                    width: 100%;
                    height: 100%;
                    overflow: hidden;
                }

                .random-item {
                    position: absolute;
                    display: inline-block;
                    line-height: 1;
                    white-space: nowrap;
                    user-select: none;
                    transform-origin: center center;
                }

                .marquee-seamless {
                    animation-name: marquee-seamless-scroll;
                    animation-timing-function: linear;
                    animation-iteration-count: infinite;
                }

                @keyframes marquee-seamless-scroll {
                    0% {
                        transform: translateX(0);
                    }

                    100% {
                        transform: translateX(-50%);
                    }
                }

                @media (max-width: 768px) {
                    .fs-main-title {
                        font-size: 1.4em;
                        margin-bottom: 20px;
                    }

                    .fs-controls {
                        flex-direction: column;
                        align-items: stretch;
                    }

                    .fs-input-text,
                    .fs-radio-group,
                    .fs-btn {
                        width: 100%;
                    }

                    .fs-color-row {
                        width: 100%;
                        justify-content: space-between;
                    }

                    .fs-color-row .fs-group {
                        width: 48%;
                        align-items: stretch;
                    }

                    .fs-input-color {
                        width: 100%;
                    }

                    .fs-btn {
                        margin-top: 10px;
                    }

                    .fs-controls>.fs-group {
                        width: 100%;
                    }
                }
            </style>
            <div class="fs-tool-container">
                <h1 class="fs-main-title">全螢幕跑馬燈、超大字顯示</h1>
                <div class="fs-controls">
                    <div class="fs-group">
                        <label for="TextInput">輸入文字 (上限100字，空格分開)</label>
                        <input type="text" id="TextInput" class="fs-input-text" maxlength="100" value="加油！"
                            placeholder="輸入文字...">
                    </div>
                    <div class="fs-color-row">
                        <div class="fs-group">
                            <label for="TextColor">文字顏色</label>
                            <input type="color" id="TextColor" class="fs-input-color" value="#1672d4">
                        </div>
                        <div class="fs-group">
                            <label for="BgColor">背景顏色</label>
                            <input type="color" id="BgColor" class="fs-input-color" value="#ffffff">
                        </div>
                    </div>
                    <div class="fs-group">
                        <label>顯示模式</label>
                        <div class="fs-radio-group">
                            <label>
                                <input type="radio" name="displayMode" value="horizontal" checked=""> 跑馬燈
                            </label>
                            <label>
                                <input type="radio" name="displayMode" value="grid"> 滿版排列
                            </label>
                            <label>
                                <input type="radio" name="displayMode" value="random"> 隨機
                            </label>
                        </div>
                    </div>
                    <button id="BtnFullScreen" class="fs-btn">全螢幕顯示</button>
                </div>
                <div class="fs-preview-area" id="PreviewContainer" style="background-color: rgb(5, 5, 5);">
                    <div id="PreviewText" class="fs-preview-text english-mode-style" style="color: rgb(240, 242, 244);">
                        TEST</div>
                </div>
            </div>
            <div id="fs-overlay" style="background-color: rgb(5, 5, 5); display: none;">
                <div id="fs-overlay-text" class="" style=""></div>
            </div>
            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    const textInput = document.getElementById('TextInput');
                    const colorInput = document.getElementById('TextColor');
                    const bgInput = document.getElementById('BgColor');
                    const modeRadios = document.getElementsByName('displayMode');
                    const btnFull = document.getElementById('BtnFullScreen');
                    const previewContainer = document.getElementById('PreviewContainer');
                    const previewText = document.getElementById('PreviewText');
                    const overlay = document.getElementById('fs-overlay');
                    const overlayText = document.getElementById('fs-overlay-text');
                    function isEnglishText(str) {
                        return /^[\x00-\x7F]*$/.test(str);
                    }
                    function getSelectedMode() {
                        for (const radio of modeRadios) {
                            if (radio.checked) return radio.value;
                        }
                        return 'horizontal';
                    }
                    function updateDisplay() {
                        let rawText = textInput.value || '';
                        if (rawText.length > 100) {
                            rawText = rawText.substring(0, 100);
                        }
                        const color = colorInput.value;
                        const bg = bgInput.value;
                        const isEn = isEnglishText(rawText);
                        previewText.classList.remove('english-mode-style', 'heavy-font');
                        overlayText.classList.remove('english-mode-style', 'heavy-font');
                        if (isEn) {
                            previewText.classList.add('english-mode-style');
                            overlayText.classList.add('english-mode-style');
                        } else {
                            previewText.classList.add('heavy-font');
                            overlayText.classList.add('heavy-font');
                        }
                        previewText.textContent = rawText;
                        previewText.style.color = color;
                        previewContainer.style.backgroundColor = bg;
                        overlayText.style.color = color;
                        overlay.style.backgroundColor = bg;
                    }
                    textInput.addEventListener('input', updateDisplay);
                    colorInput.addEventListener('input', updateDisplay);
                    bgInput.addEventListener('input', updateDisplay);
                    modeRadios.forEach(radio => radio.addEventListener('change', updateDisplay));
                    updateDisplay();
                    btnFull.addEventListener('click', function () {
                        overlay.style.display = 'flex';
                        const docEl = document.documentElement;
                        if (docEl.requestFullscreen) { docEl.requestFullscreen(); }
                        else if (docEl.webkitRequestFullscreen) { docEl.webkitRequestFullscreen(); }
                        else if (docEl.msRequestFullscreen) { docEl.msRequestFullscreen(); }
                        setTimeout(applyFullScreenLogic, 100);
                    });
                    overlay.addEventListener('click', function () {
                        overlay.style.display = 'none';
                        overlayText.className = '';
                        overlayText.id = 'fs-overlay-text';
                        overlayText.style = '';
                        overlayText.innerHTML = '';
                        if (document.exitFullscreen) { document.exitFullscreen(); }
                        else if (document.webkitExitFullscreen) { document.webkitExitFullscreen(); }
                        else if (document.msExitFullscreen) { document.msExitFullscreen(); }
                    });
                    window.addEventListener('resize', function () {
                        if (overlay.style.display === 'flex') {
                            applyFullScreenLogic();
                        }
                    });
                    function randomInt(min, max) {
                        return Math.floor(Math.random() * (max - min + 1)) + min;
                    }
                    function isColliding(r1, r2) {
                        return !(r2.left > r1.right ||
                            r2.right < r1.left ||
                            r2.top > r1.bottom ||
                            r2.bottom < r1.top);
                    }
                    function applyFullScreenLogic() {
                        const mode = getSelectedMode();
                        let rawText = textInput.value || '';
                        if (rawText.length > 100) rawText = rawText.substring(0, 100);
                        const textLength = rawText.length;
                        if (textLength === 0) return;
                        const isEn = isEnglishText(rawText);
                        const screenWidth = window.innerWidth;
                        const screenHeight = window.innerHeight;
                        const currentColor = colorInput.value;
                        // Reset
                        overlayText.className = '';
                        overlayText.innerHTML = '';
                        overlayText.style = '';
                        overlayText.style.color = currentColor;
                        if (isEn) {
                            overlayText.classList.add('english-mode-style');
                        } else {
                            overlayText.classList.add('heavy-font');
                        }
                        const availableWidth = screenWidth - 20;
                        const availableHeight = screenHeight - 30;
                        const letterSpacing = isEn ? 0 : 2;
                        const lineHeight = 1.1;
                        const charWidthFactor = isEn ? 0.6 : 1;
                        // Random No Overlap
                        // ===============================================
                        if (mode === 'random') {
                            overlayText.style.width = '100%';
                            overlayText.style.height = '100%';
                            overlayText.classList.add('mode-random');
                            const items = rawText.split(/\s+/).filter(s => s.trim().length > 0);
                            if (items.length === 0) return;
                            const baseDim = Math.min(screenWidth, screenHeight);
                            const placedRects = [];
                            items.forEach(textItem => {
                                const span = document.createElement('span');
                                span.textContent = textItem;
                                span.className = 'random-item';
                                span.style.opacity = '0';
                                overlayText.appendChild(span);
                                let placed = false;
                                let failCount = 0;
                                const maxAttempts = 50;
                                let scaleAttempt = 1.0;
                                while (!placed && failCount < maxAttempts) {
                                    const maxSize = baseDim * 0.35 * scaleAttempt;
                                    const minSize = baseDim * 0.05 * scaleAttempt;
                                    const fontSize = Math.floor(Math.random() * (maxSize - minSize) + minSize);
                                    span.style.fontSize = fontSize + 'px';
                                    const rotations = [0, 90, -90];
                                    const rotation = rotations[randomInt(0, 2)];
                                    const naturalW = span.offsetWidth;
                                    const naturalH = span.offsetHeight;
                                    let bbW = naturalW;
                                    let bbH = naturalH;
                                    if (Math.abs(rotation) === 90) {
                                        bbW = naturalH;
                                        bbH = naturalW;
                                    }
                                    const maxLeft = screenWidth - bbW;
                                    const maxTop = screenHeight - bbH;
                                    if (maxLeft < 0 || maxTop < 0) {
                                        scaleAttempt *= 0.8;
                                        failCount++;
                                        continue;
                                    }
                                    const left = randomInt(0, maxLeft);
                                    const top = randomInt(0, maxTop);
                                    const currentRect = {
                                        left: left,
                                        top: top,
                                        right: left + bbW,
                                        bottom: top + bbH
                                    };
                                    let collision = false;
                                    for (const r of placedRects) {
                                        if (isColliding(currentRect, r)) {
                                            collision = true;
                                            break;
                                        }
                                    }
                                    if (!collision) {
                                        const centerX = left + bbW / 2;
                                        const centerY = top + bbH / 2;
                                        span.style.left = centerX + 'px';
                                        span.style.top = centerY + 'px';
                                        span.style.transform = `translate(-50%, -50%) rotate(${rotation}deg)`;
                                        span.style.zIndex = randomInt(1, 50);
                                        span.style.opacity = '1';
                                        placedRects.push(currentRect);
                                        placed = true;
                                    } else {
                                        failCount++;
                                        if (failCount % 5 === 0) scaleAttempt *= 0.9;
                                    }
                                }
                                if (!placed) {
                                    span.remove();
                                }
                            });
                            return;
                        }
                        // 2. news ticker
                        // ===============================================
                        overlayText.style.width = 'max-content';
                        overlayText.style.height = 'auto';
                        overlayText.style.display = 'flex';
                        overlayText.style.justifyContent = 'center';
                        overlayText.style.alignItems = 'center';
                        overlayText.style.whiteSpace = 'nowrap';
                        if (mode === 'horizontal') {
                            if (textLength <= 2) {
                                overlayText.textContent = rawText;
                                overlayText.classList.add('mode-horizontal');
                                const widthForText = availableWidth - (textLength * letterSpacing);
                                const fontSizeByWidth = widthForText / (textLength * charWidthFactor);
                                const fontSizeByHeight = availableHeight / lineHeight;
                                overlayText.style.fontSize = Math.min(fontSizeByWidth, fontSizeByHeight) + 'px';
                                return;
                            }
                            overlayText.classList.add('mode-horizontal');
                            let divisor = (textLength < 5) ? textLength : 5;
                            const fontSizeByWidth = (availableWidth - (divisor * letterSpacing)) / (divisor * charWidthFactor);
                            const fontSizeByHeight = availableHeight / lineHeight;
                            const fontSize = Math.min(fontSizeByWidth, fontSizeByHeight);
                            overlayText.style.fontSize = fontSize + 'px';
                            const gapEm = 0.6;
                            const span1 = document.createElement('span');
                            span1.className = 'marquee-item';
                            span1.style.marginRight = gapEm + 'em';
                            span1.textContent = rawText;
                            const span2 = document.createElement('span');
                            span2.className = 'marquee-item';
                            span2.textContent = rawText;
                            overlayText.innerHTML = '';
                            overlayText.appendChild(span1);
                            overlayText.appendChild(span2);
                            overlayText.classList.add('marquee-seamless');
                            const oneLoopDistance = (textLength * fontSize * charWidthFactor) + (gapEm * fontSize);
                            const speed = 165;
                            const duration = oneLoopDistance / speed;
                            overlayText.style.animationDuration = duration + 's';
                            overlayText.style.justifyContent = 'flex-start';
                        }
                        else if (mode === 'grid') {
                            overlayText.style.width = '100%';
                            overlayText.style.height = '100%';
                            overlayText.classList.add('mode-grid');
                            overlayText.textContent = rawText;
                            if (isEn) {
                                overlayText.style.wordBreak = 'normal';
                                overlayText.style.overflowWrap = 'break-word';
                            } else {
                                overlayText.style.wordBreak = 'break-all';
                            }
                            overlayText.style.fontSize = '10px';
                            const containerW = overlayText.clientWidth;
                            const containerH = overlayText.clientHeight;
                            let min = 10;
                            let max = 3000;
                            let optimal = 10;
                            let steps = 0;
                            while (min <= max && steps < 30) {
                                const mid = Math.floor((min + max) / 2);
                                overlayText.style.fontSize = mid + 'px';
                                if (overlayText.scrollHeight <= containerH + 1 && overlayText.scrollWidth <= containerW + 1) {
                                    optimal = mid;
                                    min = mid + 1;
                                } else {
                                    max = mid - 1;
                                }
                                steps++;
                            }
                            overlayText.style.fontSize = optimal + 'px';
                        }
                    }
                });
            </script>
        </div>
    </div>
</body>

</html>